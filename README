Installation
============

This software requires Python 2.6 or 2.7 to run.

install 'setuptools', from http://pypi.python.org/pypi/setuptools#files

then, install 'pip', using command

$ easy_install-2.6 pip
 
install 3rd party dependencies using pip,

$ pip-2.6 install sqlitedict
$ pip-2.6 install xmodem
$ pip-2.6 install sauce
$ pip-2.6 install requests
$ pip-2.6 install py-bcrypt
$ pip-2.6 install pyftpdlib

Getting Started
===============

To start the system, execute command 

	python2.6 engine.py 

various options are defined in default.ini. Optional arguments are
 -cfg <cfgFile> alternate configuration file
 -v enable debug logging
 -tap snoop keyboard traffic when debugging

Monitoring
==========

Sessions are recorded to ttyrecordings/

These can be played with the 'ttyplay' utility.

The '-p' option can be used to monitor a live session, analogous to 'tail -f'.

Matrix
======

The default.ini section 'matrix' describes the 'script' path of a python
program that is loaded when a telnet connection is first made. This script
should initialize a login handshake, or otherwise approve the connection for
continuation.

This section also defines a 'topscript' python program, which is the script to
execute after the 'matrix' routine has determined succesful authentication.

Session Scripts
===============

The default.ini section 'scriptpath' defines a folder 'default', which contains
python programs for session execution. By default, the 'matrix.py' script is
used to login a user, 'nua.py' for new account creation, 'top.py' to begin
an authentication session, and 'main.py' for the main menu.

These scripts can call each other using the exported goto() and gosub() functions,
which work as one would expect, gosub() returning value and goto()

The 'topscript' script should receive the handle of the user that is authorized,
and so it should be called as goto('topscript', handle). and the main function in
'topscript' defined as def main(handle=None). If 'topscript' is called without a
handle, the value will default to 'None'.

Example scripts
===============

These scripts are found in the default/ subdirectory

  charset.py    prompt user to select 'cp437' or 'utf-8' character set
  lc.py         display 'last callers' of the board
  logoff.py     an automsg display/prompt and logoff
  main.py       main menu, called by default topscript, top.py
  matrix.py     login script, called by new connections
  news.py       file reader used to display 'system news'
  nua.py        new user application routine called by default matrix, matrix.py
  ol.py         bbs-scene.org enabled 'one liners' / wall script
  si.py         display system information door
  speedhack.py  an alternative 'topscript', to simulate dgamelaunch+NAO
  telnet.py     a telnet-out door, pass telnet address/port  as arguments
  top.py        default 'top script' called after authentication success
  weather.py    a weather API and lightbar demonstration .. ?

Globals
=======

bbs helper functions are exported to the the global namespace of all bbs scripts.
these scripts can be found in the 'bbs' sub-folder. the special __init__.py
file defines a special list, '__all__', containing a list of terms to be
injected into all bbs session scripts. it is as if the statement:

from bbs import *

is applied to all bbs scripts executed by goto() and gosub() commands.

Compatible terminal clients
===========================

PuTTy
 - under preference item 'Window -> Translation',
   option 'Remote character set', select or key in 'UTF-8'.

Unicode Unix
 - Use the UTF-8 locale, or otherwise select UTF-8 character encoding
   for your terminal application. This is the default for most modern
   unix environments. wrappers such as 'uxterm' or the utf-8 enabled
   rxvt varient, 'urxvt' can also be used.

Classic Unix
 - Failing utf-8, to display block art ansi, a font set such as
   'terminus', or dosemu fonts, should be used for an ibm
   cp437-compatible display. This is a traditional DOS encoding
   and internationalization characters may appear as '?'.

SyncTerm
 - select cp437 encoding when prompted by the bbs system.

iTerm
 - Under Preferences -> Terminal, set Character Encoding to UTF-8
   Also set Regular Font to "Courier New" under Text

Support
=======

An irc channel, '#prsv' on efnet, is available for development discussion.
